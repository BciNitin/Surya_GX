<div class="row clearfix" [@routerTransition]>
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <div class="card main-content">
            <div class="row user-component-content row-filter-container">
                <div class="col-md-10 col-lg-10 col-sm-10 col-xs-10">
                    <h3 class="title" *ngIf="!isProfileView">
                        {{isOnlyView?'User Details':userId?'Edit User':'Add Customer'}}

                    </h3>
                    <!-- <h3 class="title" *ngIf="isProfileView">
                        {{isOnlyView?'User Profile Details':userId ?'Edit User Profile':'Add User'}}
                    </h3> -->
                </div>
                <div class="alignRight col-lg-2 col-md-2 col-sm-2 col-xs-2">
                    <h3 class="pull-right" *ngIf="isOnlyView && !isProfileView && userId">
                        <i class="material-icons edit-icon" (click)="GoToAddEditUser(userId)">note_alt</i>
                        <button type="button" (click)="GoToAddEditUser(userId)" class="btn add-circle-button">Edit</button>
                    </h3>
                    <h3 class="pull-right" *ngIf="isOnlyView && userId && isProfileView">
                        <i class="material-icons edit-icon" (click)="GoToAddEditUser(userId)">note_alt</i>
                        <button type="button" (click)="GoToAddEditUser(userId)" class="btn add-circle-button">Edit</button>
                    </h3>
                    
                </div>
                
            </div>
            <div class="panel-group" id="accordion">
                <div class="panel panel-default">
                    <div id="collapse1" class="panel-collapse collapse in dark-text">
                        <div class="panel-body">

                            <div class="panel-group" id="accordion2">
                                <div class="panel panel-default">
                                    <div class="panel-heading gray-panel-header">
                                        <h4 class="panel-title dark-text">
                                            <a data-toggle="collapse" data-parent="#accordion2" href="#collapse2">Details</a>
                                        </h4>
                                    </div>
                                    <div id="collapse2" class="panel-collapse collapse in dark-text">
                                        <div class="panel-body">
                                            <form novalidate autocomplete="off" [formGroup]="addEditFormGroup" #addEditUserForm="ngForm">
                                                <div class="row fieldes">
                                                    <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">

                                                        <mat-form-field>
                                                            <mat-label>Customer Code</mat-label>
                                                            <input matInput required name="firstName" maxlength="64"
                                                                   formControlName="firstNameFormControl" [errorStateMatcher]="matcher"
                                                                   [(ngModel)]="user.firstName">

                                                            <mat-error *ngIf="addEditFormGroup?.get('firstNameFormControl')?.hasError('required') || addEditFormGroup?.get('firstNameFormControl')?.hasError('whitespace')">
                                                                Code is required.
                                                            </mat-error>
                                                            <mat-error *ngIf="addEditFormGroup?.get('firstNameFormControl')?.hasError('maxlength')">
                                                                Code maximum length exceeded.
                                                            </mat-error>
                                                        </mat-form-field>
                                                    </div>
                                                    <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">

                                                        <mat-form-field>
                                                            <mat-label>Name</mat-label>
                                                            <input matInput required name="lastName" maxlength="64"
                                                                   formControlName="lastNameFormControl" [errorStateMatcher]="matcher"
                                                                   [(ngModel)]="user.lastName">
                                                            <mat-error *ngIf="addEditFormGroup?.get('lastNameFormControl')?.hasError('required') || addEditFormGroup?.get('lastNameFormControl')?.hasError('whitespace')">
                                                                name is required.
                                                            </mat-error>
                                                            <mat-error *ngIf="addEditFormGroup?.get('lastNameFormControl')?.hasError('maxlength')">
                                                                name maximum length exceeded.
                                                            </mat-error>
                                                        </mat-form-field>
                                                    </div>
                                                </div>
                                                <div class="row fieldes">
                                                    <div class="col-md-6 col-md-6 col-lg-6 col-sm-12 col-xs-12">
                                                        <mat-form-field>
                                                            <mat-label>Address</mat-label>
                                                            <input type="text" [readonly]="isReadOnly" (focus)="isReadOnly=false" matInput required
                                                                   maxlength="256" formControlName="userNameFormControl" [errorStateMatcher]="matcher"
                                                                   name="userName" [(ngModel)]="user.userName">

                                                            <mat-error *ngIf="addEditFormGroup?.get('userNameFormControl')?.hasError('required')
                          || addEditFormGroup?.get('userNameFormControl')?.hasError('whitespace')">
                          Address is required.
                                                            </mat-error>
                                                            <mat-error *ngIf="addEditFormGroup?.get('userNameFormControl')?.hasError('maxlength')">
                                                                Address maximum length exceeded.
                                                            </mat-error>
                                                        </mat-form-field>
                                                    </div>
                                        <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">

                                            <mat-form-field>
                                                <mat-label>City</mat-label>
                                                <input type="text" [readonly]="isReadOnly" (focus)="isReadOnly=false" matInput required
                                                       maxlength="256" formControlName="userNameFormControl" [errorStateMatcher]="matcher"
                                                       name="userName" [(ngModel)]="user.userName">

                                                <mat-error *ngIf="addEditFormGroup?.get('userNameFormControl')?.hasError('required')
              || addEditFormGroup?.get('userNameFormControl')?.hasError('whitespace')">
              City is required.
                                                </mat-error>
                                                <mat-error *ngIf="addEditFormGroup?.get('userNameFormControl')?.hasError('maxlength')">
                                                    City maximum length exceeded.
                                                </mat-error>
                                            </mat-form-field>
                                                    </div>
                                                </div>
                                                <div class="row fieldes">

                                                                                                   </div>
                                                <div class="row fieldes" formGroupName="passwordMatchGroup">
                                                    <div class="col-md-6 col-md-6 col-lg-6 col-sm-12 col-xs-12" [hidden]="userId">
                                                        <mat-form-field>
                                                            <mat-label>District</mat-label>
                                                            <input type="text" [readonly]="isReadOnly" (focus)="isReadOnly=false" matInput required
                                                                   maxlength="256" formControlName="userNameFormControl" [errorStateMatcher]="matcher"
                                                                   name="userName" [(ngModel)]="user.userName">
            
                                                            <mat-error *ngIf="addEditFormGroup?.get('userNameFormControl')?.hasError('required')
                          || addEditFormGroup?.get('userNameFormControl')?.hasError('whitespace')">
                          District is required.
                                                            </mat-error>
                                                            <mat-error *ngIf="addEditFormGroup?.get('userNameFormControl')?.hasError('maxlength')">
                                                                District maximum length exceeded.
                                                            </mat-error>
                                                        </mat-form-field>                                                 </div>
                                                    <div class="col-md-6 col-md-6 col-lg-6 col-sm-12 col-xs-12" [hidden]="userId">
                                                        
                                                    </div>
                                                </div>
                                                <div class="row fieldes">

                                                    <div class="col-md-6 col-md-6 col-lg-6 col-sm-12 col-xs-12 is-active-mt">

                                                        <mat-checkbox formControlName="isActiveFormControl" name="isActive"
                                                                      [(ngModel)]="user.isActive">
                                                            Is Active
                                                        </mat-checkbox>
                                                    </div>
                                                    <!-- <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12" *ngIf="userId>0">
                                                      <mat-form-field>
                                                        <mat-label>Approval Status</mat-label>
                                                        <input matInput name="approvalStatus" formControlName="approvalStatusFormControl"
                                                          [(ngModel)]="user.userEnteredApprovalStatus">
                                                      </mat-form-field>
                                                    </div> -->
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="panel-group" id="accordion3">
                            
                        </div>

                        <div class="row">
                            <div class="col-md-6 col-md-6 col-lg-6 col-sm-12 col-xs-12">
                            </div>
                            <div class="col-md-6 col-md-6 col-lg-6 col-sm-12 col-xs-12" *ngIf="isOnlyView && !isProfileView">
                                <mat-form-field *ngIf="isOnlyView && user.isApprovalRequired && isPermissionGranted('User.Approver')">
                                    <mat-label>Approval/Reject Description</mat-label>

                                    <textarea matInput name="Approval/Reject Description" [(ngModel)]="user.approvalStatusDescription"
                                              maxlength="5000" (focus)="this.isdescriptionValid=true;"></textarea>
                                </mat-form-field>
                                <div class="mat-error approve-description-error" *ngIf="!isdescriptionValid">
                                    Rejection reason is required.
                                </div>
                                <button class="btn filter-back-button pull-right" *ngIf="isOnlyView"
                                        (click)="GoToUsersListFromView()">
                                    Back
                                </button>
                                <button class="btn btn-danger approve-reject-button filter-back-button pull-right"
                                        *ngIf="isOnlyView && user.isApprovalRequired && isPermissionGranted('User.Approver')  && user.userEnteredApprovalStatus!='Rejected'"
                                        (click)="RejectUser()">
                                    Reject
                                </button>
                                <button class="btn btn-success approve-reject-button filter-back-button pull-right"
                                        *ngIf="isOnlyView && user.isApprovalRequired && isPermissionGranted('User.Approver') && user.userEnteredApprovalStatus!='Approved'"
                                        (click)="ApproveUser()">
                                    Approve
                                </button>
                            </div>
                            <div class="col-md-6 col-md-6 col-lg-6 col-sm-12 col-xs-12" *ngIf="isOnlyView && isProfileView">
                                <button class="btn filter-back-button pull-right" *ngIf="isOnlyView"
                                        (click)="GoToUsersListFromView()">
                                    Close
                                </button>

                            </div>
                            <div class="col-md-6 col-md-6 col-lg-6 col-sm-12 col-xs-12" *ngIf="!isOnlyView">
                                <button class="btn filter-back-button pull-right" *ngIf="!userId"
                                        (click)="GoToUsersListFromAdd()">
                                    Cancel
                                </button>
                                

                                <button class="btn btn-primary pull-right" *ngIf="!userId"
                                        (click)="markDirty() && addEditFormGroup.valid">
                                    Add
                                </button>
                                <button class="btn btn-primary pull-right" *ngIf="!isOnlyView && userId"
                                        (click)="markDirty() && addEditFormGroup.valid && SaveUser()">
                                    Save
                                </button>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>