<div class="row clearfix" [@routerTransition]>
  <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
    <div class="card main-content">
      <div class="row user-component-content row-filter-container">
        <div class="col-md-10 col-lg-10 col-sm-10 col-xs-10">
          <h3 class="title">
            {{'Reset Password '}}
            <!-- {{user.userName}} -->

          </h3>

        </div>


      </div>
      <div class="panel-group" id="accordion">
        <div class="panel panel-default">

          <div id="collapse1" class="panel-collapse collapse in dark-text">
              <div class="panel-body">

                  <div class="panel-group" id="accordion2">
                      <div class="panel panel-default">
                          <div class="panel-heading gray-panel-header">
                              <h4 class="panel-title dark-text">
                                  <a data-toggle="collapse" data-parent="#accordion2" href="#collapse2">Details</a>
                              </h4>
                          </div>
                          <div id="collapse2" class="panel-collapse collapse in dark-text">
                              <div class="panel-body">
                                  <form novalidate autocomplete="off" [formGroup]="resetPasswordFormGroup"
                                        #addEditUserForm="ngForm">
                                      <div class="row fieldes">
                                          <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">

                                              <mat-form-field>
                                                  <mat-label>First Name </mat-label>
                                                  <input matInput required name="firstName" maxlength="64"
                                                         formControlName="firstNameFormControl" [errorStateMatcher]="matcher"
                                                         [(ngModel)]="user.firstName">

                                              </mat-form-field>
                                          </div>
                                          <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">

                                              <mat-form-field>
                                                  <mat-label>Last Name</mat-label>
                                                  <input matInput required name="lastName" maxlength="64"
                                                         formControlName="lastNameFormControl" [errorStateMatcher]="matcher"
                                                         [(ngModel)]="user.lastName">

                                              </mat-form-field>
                                          </div>
                                      </div>
                                      <div class="row fieldes">
                                          <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">

                                              <mat-form-field>
                                                  <mat-label>User Name</mat-label>
                                                  <input matInput required name="empCode" maxlength="64"
                                                         formControlName="empCodeFormControl" [errorStateMatcher]="matcher"
                                                         [(ngModel)]="user.userName">

                                              </mat-form-field>
                                          </div>
                                          <div class="col-md-6 col-md-6 col-lg-6 col-sm-12 col-xs-12"
                                               formGroupName="passwordMatchGroup">
                                              <mat-form-field>
                                                  <mat-label>Password</mat-label>
                                                  <input [type]="hidePassword ? 'password' : 'text'" maxlength="32" required
                                                         formControlName="passwordFormControl" [errorStateMatcher]="matcher" matInput
                                                         name="password" [(ngModel)]="changePswd.newPassword" [disabled]="isOnlyView">

                                                  <button mat-icon-button matSuffix (click)="hidePassword = !hidePassword"
                                                          [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hidePassword">
                                                      <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
                                                  </button>
                                                  <mat-hint>
                                                      Must contain at least 8 characters , one uppercase letter, one lowercase letter and a special character.
                                                  </mat-hint>
                                                  <mat-error *ngIf="resetPasswordFormGroup?.get('passwordMatchGroup')?.controls?.passwordFormControl?.hasError('required')
                            || resetPasswordFormGroup?.get('passwordMatchGroup')?.controls?.passwordFormControl?.hasError('whitespace')">
                                                      Password is required.
                                                  </mat-error>
                                                  <mat-error *ngIf="resetPasswordFormGroup?.get('passwordMatchGroup')?.controls?.passwordFormControl?.hasError('maxlength')">
                                                      Password maximum length exceeded.
                                                  </mat-error>
                                                  <mat-error *ngIf="resetPasswordFormGroup?.get('passwordMatchGroup')?.controls?.passwordFormControl?.hasError('pattern')">
                                                      Please enter valid password. Must contain at least 8 characters , one uppercase letter, one lowercase letter and a special character.
                                                  </mat-error>
                                              </mat-form-field>
                                          </div>
                                      </div>


                                      <div class="row fieldes" formGroupName="passwordMatchGroup">

                                          <div class="col-md-6 col-md-6 col-lg-6 col-sm-12 col-xs-12">
                                              <mat-form-field>
                                                  <mat-label>Confirm Password</mat-label>
                                                  <input [type]="hideConfirmPassword ? 'password' : 'text'" maxlength="32"
                                                         formControlName="confirmPasswordFormControl" [errorStateMatcher]="matcher" matInput
                                                         required name="confirmPassword" [(ngModel)]="changePswd.confirmPassword" [disabled] = "isOnlyView">

                                                  <button mat-icon-button matSuffix (click)="hideConfirmPassword = !hideConfirmPassword"
                                                          [attr.aria-label]="'Hide Confirm password'" [attr.aria-pressed]="hideConfirmPassword">
                                                      <mat-icon>{{hideConfirmPassword ? 'visibility_off' : 'visibility'}}</mat-icon>
                                                  </button>
                                                  <mat-hint>Password and Confirm Password should match.</mat-hint>

                                                  <mat-error *ngIf="resetPasswordFormGroup?.get('passwordMatchGroup')?.controls?.confirmPasswordFormControl?.hasError('required')
                            || resetPasswordFormGroup?.get('passwordMatchGroup')?.controls?.confirmPasswordFormControl?.hasError('whitespace')">
                                                      Confirm password is required.
                                                  </mat-error>
                                                  <mat-error *ngIf="resetPasswordFormGroup?.get('passwordMatchGroup')?.controls?.confirmPasswordFormControl?.hasError('mismatch')
                            && !resetPasswordFormGroup?.get('passwordMatchGroup')?.controls?.confirmPasswordFormControl?.hasError('required')
                            && !resetPasswordFormGroup?.get('passwordMatchGroup')?.controls?.confirmPasswordFormControl?.hasError('whitespace')">
                                                      Password and Confirm password should match.
                                                  </mat-error>
                                                  <mat-error *ngIf="resetPasswordFormGroup?.get('passwordMatchGroup')?.controls?.confirmPasswordFormControl?.hasError('maxlength')">
                                                      Confirm password maximum length exceeded.
                                                  </mat-error>
                                              </mat-form-field>
                                          </div>
                                      </div>


                                  </form>
                              </div>
                          </div>
                      </div>
                  </div>
                  <div class="row">
                      <div class="col-md-6 col-md-6 col-lg-6 col-sm-12 col-xs-12">
                      </div>
                      <div class="col-md-6 col-md-6 col-lg-6 col-sm-12 col-xs-12 ">
                          <button class="btn filter-back-button pull-right" (click)="Back()"> Back</button>
                          <button *ngIf = "!isOnlyView" class="btn btn-warning approve-reject-button filter-back-button pull-right" style="margin-left:7px" (click)="Clear()"> Clear</button>
                          <button *ngIf = "!isOnlyView || (isAdminRole && user.passwordStatus === 1)" class="btn btn-primary filter-back-button pull-right"
                                  (click)="markDirty() && resetPasswordFormGroup.valid && Submit()">
                              Submit
                          </button>

                      </div>
                  </div>
              </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>